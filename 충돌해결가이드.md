# Git 충돌 해결 가이드

## 충돌이 발생했을 때

### 1. 충돌 파일 확인
```bash
git status

# 빨간색으로 표시된 파일들이 충돌 파일
```

### 2. 충돌 유형별 해결

#### A. Docker 설정 파일 (docker 브랜치 것 유지)
```bash
# 이 파일들은 docker 브랜치 것을 사용
git checkout --ours docker-compose.yml
git checkout --ours docker-compose.dev.yml
git checkout --ours backend/Dockerfile
git checkout --ours backend/Dockerfile.dev
git checkout --ours frontend/Dockerfile
git checkout --ours frontend/Dockerfile.dev
git checkout --ours model_server/Dockerfile
git checkout --ours model_server/Dockerfile.dev
git checkout --ours .dockerignore
git checkout --ours backend/.dockerignore
git checkout --ours frontend/.dockerignore
git checkout --ours model_server/.dockerignore
```

#### B. 코드 파일 (main 브랜치 것 사용)
```bash
# 이 파일들은 main의 최신 코드 사용
git checkout --theirs backend/src/**
git checkout --theirs frontend/src/**
git checkout --theirs model_server/app/**
```

#### C. 의존성 파일 (수동 확인 필요)
```bash
# 이 파일들은 직접 열어서 확인
# - package.json
# - requirements.txt
# - .env.example

# 충돌 표시 찾기:
# <<<<<<< HEAD (docker 브랜치)
# 여기는 docker 브랜치 내용
# =======
# 여기는 main 브랜치 내용
# >>>>>>> main

# 필요한 것만 남기고 나머지 삭제
```

### 3. 의존성 파일 병합 예시

#### package.json 충돌 시
```json
{
  "dependencies": {
    // docker 브랜치에만 있던 것
    "express": "^5.1.0",
    
    // main 브랜치에 새로 추가된 것
    "axios": "^1.6.0",
    
    // 둘 다 합치기!
  }
}
```

#### requirements.txt 충돌 시
```txt
# docker 브랜치 것
fastapi==0.104.1
torch==2.1.2

# main 브랜치에 새로 추가된 것
langchain==0.1.0

# 둘 다 포함!
```

### 4. 충돌 해결 후
```bash
# 1. 수정한 파일 추가
git add .

# 2. 병합 커밋
git commit -m "Merge main into docker branch"

# 3. 푸시
git push origin docker
```

## 빠른 해결 명령어 모음

### 모든 Docker 설정 파일 유지
```bash
git checkout --ours docker-compose*.yml
git checkout --ours **/Dockerfile*
git checkout --ours **/.dockerignore
git checkout --ours DOCKER*.md
git checkout --ours Docker*.md
git checkout --ours 시작하기.md
```

### 모든 코드 파일 main 것 사용
```bash
git checkout --theirs backend/src/
git checkout --theirs frontend/src/
git checkout --theirs model_server/app/
```

### 충돌 파일만 보기
```bash
git diff --name-only --diff-filter=U
```

## 충돌 해결 체크리스트

- [ ] Docker 설정 파일 확인 (docker 브랜치 것 유지)
- [ ] 코드 파일 확인 (main 최신 것 사용)
- [ ] package.json 병합 (의존성 합치기)
- [ ] requirements.txt 병합 (의존성 합치기)
- [ ] .env.example 확인 (새 환경변수 추가)
- [ ] git add . 실행
- [ ] git commit 실행
- [ ] git push 실행

## 병합 후 확인사항

### 1. 의존성 확인
```bash
# Backend
cd backend
npm install

# Frontend
cd frontend
npm install

# Model Server
cd model_server
pip install -r requirements.txt
```

### 2. Docker 빌드 테스트
```bash
docker-compose -f docker-compose.dev.yml up --build
```

### 3. 각 서비스 확인
- Frontend: http://localhost:5173
- Backend: http://localhost:3001
- Model Server: http://localhost:8000

## 문제 발생 시

### 병합 취소하고 다시 시작
```bash
git merge --abort
```

### 특정 파일만 다시 가져오기
```bash
# main에서 특정 파일 가져오기
git checkout main -- path/to/file

# docker 브랜치 것으로 되돌리기
git checkout docker -- path/to/file
```

### 도움 요청
```bash
# 충돌 상태 확인
git status

# 충돌 파일 내용 확인
git diff
```
